<html>
	<head>
		<link rel="stylesheet" href="main.css">
		<script>
			const register = async ()=>{
				const username = document.getElementById('username');
				const password = document.getElementById('password');
				const password2 = document.getElementById('password2');
				if(password.value !== password2.value)
					return alert('Passwords do not match!');
				const result = await(await fetch('/api/register',{
					method:'post',
					headers:{
						'Content-Type': 'application/json'
					},
					body: JSON.stringify({
						username: username.value,
						password: password.value
					})
				})).json();
				username.value = '';
				password.value = '';
				password2.value = '';
				if(!result.success)
					return alert(result.message);
				alert('Registration successful, log in with credentials now.');
				location.href = '/wetty';
			}
			window.addEventListener('load',()=>{
				document.getElementById('password2').addEventListener('keypress',e=>{
					if(e.keyCode === 13)
						register();
				});
			});
		</script>
	</head>
	<body>
		<center>
			<span class="dark">Shell </span>
			<span class="light">Server</span>
			<br/>
			<a href="/wetty">Go to login</a>
			<br/>
			<br/>
			<br/>
			<br/>
			<br/>
			<br/>
			<br/>
			<span class="dark"> Registration</span>
			<input id="username" placeholder="username">
			<br/>
			<br/>
			<input id="password" placeholder="password" type="password">
			<br/>
			<br/>
			<input id="password2" placeholder="repeat password" type="password">
			<br/>
			<br/>
			<input type="button" value="Submit" onclick="register()">
		</center>

	</body>
</html>

